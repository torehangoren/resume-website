---
import SectionTitle from "../ui/SectionTitle.astro";
import Tag from "../ui/Tag.astro";
import { getCollection } from "astro:content";

const items = await getCollection("projects");
const featured = items.filter((p) => p.data.featured);
const rest = items.filter((p) => !p.data.featured);
const list = [...featured, ...rest];
---
<section class="card section">
  <SectionTitle title="Projects" subtitle="Selected work" />
  <div class="grid grid-3">
    {list.map((p) => (
      <div class="card" style="padding:14px; background: rgba(255,255,255,0.02);">
        <div style="display:flex; justify-content:space-between; gap:10px;">
          <div style="font-weight:700;">{p.data.title}</div>
          {p.data.featured ? <span class="badge">Featured</span> : null}
        </div>
        <p style="margin-top:8px;">{p.data.summary}</p>
        <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;">
          {p.data.tech.map((t) => <Tag label={t} />)}
        </div>
        {p.data.link ? (
          <div style="margin-top:12px;">
            <a class="btn" href={p.data.link} target="_blank">Open</a>
          </div>
        ) : null}
      </div>
    ))}
  </div>
</section>
